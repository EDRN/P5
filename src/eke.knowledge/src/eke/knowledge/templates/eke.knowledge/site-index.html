{% extends 'eke.knowledge/knowledge-folder.html' %}
{% load wagtailcore_tags plotly_dash edrn_site_tags %}
{# ðŸ”® TODO: caching #}
{% block extra_css %}
    {% plotly_header %}
{% endblock %}
{% block knowledge_content %}

    <div class='row'>
        <div class='col-auto'>
            <p>
                <i class='bi bi-patch-check'></i>Â Also try the <a href='{% url "find-members" %}'>member finder</a>.
            </p>
        </div>
    </div>

    <div class='row mb-3'>
        {% plotly_direct name='SitesChart' %}
    </div>

    {% if knowledge_empty %}
        <p>(There are no sites.)</p>
    {% else %}
        <ul>
            <li><a href='#bccs'>Biomarker Characterization Centers</a></li>
            <li><a href='#bdls'>Biomarker Developmental Laboratories</a></li>
            <li><a href='#brls'>Biomarker Reference Laboratories</a></li>
            <li><a href='#cvcs'>Clinical Validation Centers</a></li>
            <li><a href='#dmcc'>Data Management and Coordinating Center</a></li>
            <li><a href='#ic'>Informatics Center</a></li>
            <li><a href='#nci'>National Cancer Institute</a></li>
            <li><a href='#assoc'>Associate Members</a></li>
            <li><a href='#spore'>SPOREs</a></li>
            <li><a href='#nonEDRN'>Non-EDRN Sites</a></li>
        </ul>

        <h2><a name='bccs'>Biomarker Characterization Centers</a></h2>
        {% if bccs %}
            {% edrn_sites_by_type bccs True %}
        {% else %}
            <p class='small'>There are no known Biomarker Characterization Centers.</p>
        {% endif %}

        <h2><a name='bdls'>Biomarker Developmental Laboratories</a></h2>
        {% if bdls %}
            <p class='pb-1 mb-3 small'>
                The following Biomarker Developmental Laboratories are organized by the focused organ of biomarker
                development, and then by the proposal made by those participating sites. The term "No organ-specific
                research" means the sites are not organ-focused. The term "No proposal" means no proposal title was
                found for the sites. Note that even where there is no proposal title, a summary of the specialty for
                each site may still be available.
            </p>
            {% biomarker_developmental_laboratories bdls %}
        {% else %}
            <small>There are no known Biomarker Developmental Laboratories.</small>
        {% endif %}

        <h2><a name='brls'>Biomarker Reference Laboratories</a></h2>
        {% if brls %}
            {% edrn_sites_by_type brls True %}
        {% else %}
            <p class='small'>There are no known Biomarker Reference Laboratories.</p>
        {% endif %}

        <h2><a name='cvcs'>Clinical Validation Centers</a></h2>
        {% if cvcs %}
            {% edrn_sites_by_type cvcs True %}
        {% else %}
            <p class='small'>There are no known Clinical Validation Centers.</p>
        {% endif %}

        <h2><a name='dmcc'>Data Management and Coordinating Center</a></h2>
        {% if dmccs %}
            {% edrn_sites_by_type dmccs False %}
        {% else %}
            <p class='small'>There are no Data Management or Coordinating Centers.</p>
        {% endif %}

        <h2><a name='dmcc'>Informatics Center</a></h2>
        {% if ics %}
            {% edrn_sites_by_type ics False %}
        {% else %}
            <p class='small'>There are no known Informatics Centers.</p>
        {% endif %}

        <h2><a name='nci'>National Cancer Institute</a></h2>
        {% if ncis %}
            {% edrn_sites_by_type ncis False %}
        {% else %}
            <p class='small'>There is no National Cancer Institute.</p>
        {% endif %}

        <h2><a name='assoc'>Associate Members</a></h2>
        <p>This section lists associate EDRN members.</p>

        <h3>Associate Member A â€” EDRN Funded</h3>
        {% if typeA %}
            {% edrn_sites_by_type typeA False %}
        {% else %}
            <p class='small'>There are no type A associate members.</p>
        {% endif %}

        <h3>Associate Member B</h3>
        {% if typeB %}
            {% edrn_sites_by_type typeB False %}
        {% else %}
            <p class='small'>There are no type B associate members.</p>
        {% endif %}

        <h3>Associate Member C</h3>
        {% if typeC %}
            {% edrn_sites_by_type typeC False %}
        {% else %}
            <p class='small'>There are no type C associate members.</p>
        {% endif %}

        <h2><a name='spore'>SPOREs</a></h2>
        {% if spore %}
            {% edrn_sites_by_type spore False %}
        {% else %}
            <p class='small'>There are no Specialized Programs of Research Excellence (SPORE).</p>
        {% endif %}

        <h2><a name='nonEDRN'>Non-EDRN Sites</a></h2>
        {% if non %}
            {% edrn_sites_by_type non False %}
        {% else %}
            <p class='small'>There are no non-EDRN sites.</p>
        {% endif %}

    {% endif %}
{% endblock knowledge_content %}
{% block extra_js %}
    {% plotly_footer %}
{% endblock extra_js %}
{# -*- Django HTML -*- #}
