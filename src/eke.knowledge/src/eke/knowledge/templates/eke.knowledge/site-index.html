{% extends 'eke.knowledge/knowledge-folder.html' %}
{% load wagtailcore_tags plotly_dash edrn_site_tags %}
{# ðŸ”® TODO: caching #}
{% block extra_css %}
    {% plotly_header %}
{% endblock %}
{% block knowledge_content %}

    <div class='row'>
        <div class='col-auto'>
            <p>
                <i class='bi bi-patch-check'></i>Â Also try the <a href='{% url "find-members" %}'>member finder</a>.
            </p>
        </div>
    </div>

    <div class='row mb-3'>
        {% plotly_direct name='SitesChart' %}
    </div>

    {% if knowledge_empty %}
        <p>(There are no sites.)</p>
    {% else %}
        <ul>
            <li><a href='#bccs'>Biomarker Characterization Centers</a></li>
            <li><a href='#bdls'>Biomarker Developmental Laboratories</a></li>
            <li><a href='#brls'>Biomarker Reference Laboratories</a></li>
            <li><a href='#cvcs'>Clinical Validation Centers</a></li>
            <li><a href='#dmcc'>Data Management and Coordinating Center</a></li>
            <li><a href='#ic'>Informatics Center</a></li>
            <li><a href='#nci'>National Cancer Institute</a></li>
            <li><a href='#assoc'>Associate Members</a></li>
            <li><a href='#spore'>SPOREs</a></li>
            <li><a href='#nonEDRN'>Non-EDRN Sites</a></li>
        </ul>

        <h2><a name='bccs'>Biomarker Characterization Centers</a></h2>
        {% if bcc %}
            {% edrn_sites_organized_by_needlessly_complex_and_arbitrary_groups "BCC" bcc True %}
        {% else %}
            <p class='small'>There are no known Biomarker Characterization Centers.</p>
        {% endif %}

        <h2><a name='bdls'>Biomarker Developmental Laboratories</a></h2>
        {% if bdl %}
            {% edrn_sites_organized_by_needlessly_complex_and_arbitrary_groups "BDL" bdl True %}
        {% else %}
            <small>There are no known Biomarker Developmental Laboratories.</small>
        {% endif %}

        <h2><a name='brls'>Biomarker Reference Laboratories</a></h2>
        {% if brl %}
            {% edrn_sites_organized_by_needlessly_complex_and_arbitrary_groups "BRL" brl True %}
        {% else %}
            <p class='small'>There are no known Biomarker Reference Laboratories.</p>
        {% endif %}

        <h2><a name='cvcs'>Clinical Validation Centers</a></h2>
        {% if cvc %}
            {% edrn_sites_organized_by_needlessly_complex_and_arbitrary_groups "CVC" cvc True %}
        {% else %}
            <p class='small'>There are no known Clinical Validation Centers.</p>
        {% endif %}

        <h2><a name='dmcc'>Data Management and Coordinating Center</a></h2>
        {% if dmcc %}
            {% edrn_sites_organized_by_needlessly_complex_and_arbitrary_groups "DMCC" dmcc False %}
        {% else %}
            <p class='small'>There are no Data Management or Coordinating Centers.</p>
        {% endif %}

        <h2><a name='ic'>Informatics Center</a></h2>
        {% if ics %}
            {% edrn_sites_by_type ics %}
        {% else %}
            <p class='small'>There are no known Informatics Centers.</p>
        {% endif %}

        <h2><a name='nci'>National Cancer Institute</a></h2>
        {% if ncis %}
            {% edrn_sites_by_type ncis %}
        {% else %}
            <p class='small'>There is no National Cancer Institute.</p>
        {% endif %}

        <h2><a name='assoc'>Associate Members</a></h2>
        <p>This section lists associate EDRN members.</p>

        <h3>Associate Member A â€” EDRN Funded</h3>
        {% if typeA %}
            {% edrn_sites_by_type typeA %}
        {% else %}
            <p class='small'>There are no type A associate members.</p>
        {% endif %}

        <h3>Associate Member B</h3>
        {% if typeB %}
            {% edrn_sites_by_type typeB %}
        {% else %}
            <p class='small'>There are no type B associate members.</p>
        {% endif %}

        <h3>Associate Member C</h3>
        {% if typeC %}
            {% edrn_sites_by_type typeC %}
        {% else %}
            <p class='small'>There are no type C associate members.</p>
        {% endif %}

        <h2><a name='spore'>SPOREs</a></h2>
        {% if spore %}
            {% edrn_sites_by_type spore %}
        {% else %}
            <p class='small'>There are no Specialized Programs of Research Excellence (SPORE).</p>
        {% endif %}

        <h2><a name='nonEDRN'>Non-EDRN Sites</a></h2>
        {% if non %}
            {% edrn_sites_by_type non %}
        {% else %}
            <p class='small'>There are no non-EDRN sites.</p>
        {% endif %}

    {% endif %}
{% endblock knowledge_content %}
{% block extra_js %}
    {% plotly_footer %}
{% endblock extra_js %}
{# -*- Django HTML -*- #}
