{% extends 'eke.knowledge/knowledge-folder.html' %}
{# ðŸš— Car Index #}
{# ðŸ”® TODO: caching #}
{% load wagtailcore_tags knowledge_tags static %}
{% block knowledge_content %}


    {% if knowledge_empty %}
        <div class='row'>
            <small>There are no cars in this folder.</small>
        </div>
    {% else %}
        <form class='row g-3' action='{% pageurl page %}' method='GET'>
            <div class='col-md-1'>
                <label for='searchTerms' class='form-label'>Search Cars:</label>
            </div>
            <div class='col-md-10'>
                <input id='searchTerms' class='form-control form-control-sm' type='text' name='query'
                    {% if query %}
                        value='{{query}}'
                    {% else %}
                        placeholder='Search termsâ€¦'
                    {% endif %}
                    aria-label='Search termsâ€¦'
                />
            </div>
            <div class='col-md-1'>
                <input type='submit' value='Search'/>
            </div>
        </form>
        <div class='row'>
            <form class='col-md-3 col-sm-4' id='facets'>
                {% faceted_vocab_selector 'make' %}
                {% faceted_vocab_checks 'condition' %}

                <div class='mb-2'>
                    <h6>Price</h6>
                    <input name='minPrice' id='minPrice' type='text' class='input-sm' placeholder='Low'/>
                    <input name='maxPrice' id='maxPrice' type='text' class='input-sm' placeholder='High'/>
                </div>

            </form>
            <div class='col-md-9 col-sm-8'>
                <div id='searchCont'>
                    {% faceted_results %}
                </div>
            </div>
        </div>
    {% endif %}

{% endblock knowledge_content %}
{% block extra_js %}
    <script src='{% static "eke.knowledge/js/jquery.deserialize.js" %}'></script>
    <script src='{% static "eke.knowledge/js/jquery.facets.js" %}'></script>
    <script>
        $(document).ready(function() {
            $('form#facets').facets({
                URLParams: [{name: 'ajax', value: 'true'}],
                preAJAX: function() {
                    // Validation can occur here apparently
                    return true;
                }
            });
        });
    </script>
{% endblock extra_js %}

{# -*- Django HTML -*- #}
